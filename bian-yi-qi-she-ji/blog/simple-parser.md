# 自己动手写简单的词法分析器

# V2

解析`Golang`代码。

要解析的是下面这段代码。

```go
package main

import "fmt"

func main() {
   /* 这是我的第一个简单的程序 */
   fmt.Println("Hello, World!")
  
  	var a string = "Runoob"
    fmt.Println(a)

    var b, c int = 1, 2
    fmt.Println(b, c)
}
```

期望结果是：

1. 关键字
2. 标识符
3. 整数
4. 符号
5. 注释

忽略这些字符：

1. 空白字符。
2. 换行符。
3. 回车符。
4. 水平制表符。

## 关键方法

### move

往前移动一个字符。

### match



## 标识符

把关键字和标识符解析为同一种类型的token。







算法是：

1. 当前字符是“空白字符”，进入“空白字符”处理流程。
2. 终止条件是：
   1. 遇到非“空白字符”
   2. 遇到换行符、回车符

读取`token`。

算法是：

1. 看当前字符是什么。
2. 当前字符是`/`，进入注释处理流程。
   1. 下一个字符不是`/`，也不是`*`，报错。
   2. 下一个字符是`/`，
      1. 这一行都是注释。读取每个字符。
      2. 遇到换行或回车时终止读取。
   3. 下一个字符是`*`，
      1. 读取所有字符直到`*/`，这些字符都是注释。
      2. 终止条件是：读取到一个`*`，立即检查下一个字符是不是`/`。
         1. 是`/`，终止。
         2. 不是，继续读取。
3. 当前字符是字母，进入关键字流程。
   1. 读取下一个字符，
   2. 终止条件是，遇到非字母字符。
4. 当前字符是`(`这类符合，进入符号流程。
   1. 直接存储，并且读取下一个字符。
5. 当前字符是数字，进入整数处理流程。需优化。
   1. 读取下一个字符。
      1. 如果是数字，组合到上一个字符。
      2. 如果不是数字，终止。
6. 上面每种情况的终止条件都不相同。



## 解析注释

### star

`/* 注释 */`，这种类注释。

解析过程中，什么时候存储字？

确定是合法注释后，统一存储。

非法注释，直接退出程序。

解析注释时，放入缓存区。缓冲区不是什么神秘的概念，在这里，就是一个存储注释的字符串。



## 解析整数



## 解析关键字



## 解析符号

直接识别，识别出就退出当前流程。

若识别到符号，指针加1；没识别到，指针原值返回。



## 测试

单元测试太有用了。

使用单元测试不一定要用那些单元测试框架，一个函数一个函数地测试，就是在做单元测试。单元测试，也是一种“思想”。思想通过各种具体形式体现出来。

sw72g9YQ

