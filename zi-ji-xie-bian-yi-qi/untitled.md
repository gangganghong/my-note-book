# 用bison处理main函数

在action中写匹配规则很容易，难点是如何存储匹配到的语言元素。

另外一个难点是，怎么用C语言构造出合适的数据结构存储分析后的main函数。

例如，函数有多个参数，我用数组来存储这些参数。在分析前不知道参数个数，不能确定数组大小，但这个数组的大小却必须在定义AST数据结构时指定。

对这个问题，struct允许最后一个成员是不定长数组。那么，存储函数参数的问题勉强解决了。

可是，函数体由多个变量、多条语句组成，这些需要不定长数组来存储。一个结构体只允许最后一个成员是不定长数组。我如何才能存储函数体的变量和多条语句？

c语言作为一门写出过操作系统的语言，肯定能解决这类问题，可我却不知道怎么解决。

